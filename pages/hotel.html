<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TRIPVUM</title>
    <link rel="stylesheet" href="../files/css/style.css" />
    <link rel="stylesheet" href="../files/css/hotel.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper@8/swiper-bundle.min.css"
    />
    <!-- <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet"> -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
  </head>
  <body>
    <header>
      <div class="container">
        <a href="../index.html" class="logo">
          <img src="../images/Logo 500x500 px.png" alt="logo" />
        </a>
        
        <nav class="navbar">
          <a href="../index.html#home">home</a>
          <a href="../index.html#booking">booking</a>
          <a href="../index.html#trip">Trip</a>
          <a href="../index.html#offers">offers</a>
          <a href="../index.html#review">review</a>
          <a href="../index.html#contact">contact</a>
        </nav>
        <div class="icon">
          <i class="fas fa-user" onclick="showform()"></i>
        </div>
      </div>
    </header>

    <div class="login-form" id="loginform">
      <i class="fas fa-times" id="form-close" onclick="hideform()"></i>
      <form action="">
        <h3>login</h3>
        <input type="email" class="box" placeholder="Enter your email" />
        <input type="password" class="box" placeholder="Enter your password" />
        <input type="submit" value="login now" class="btn" />
        <input type="checkbox" id="remember" />
        <label for="remmember"> remember me</label>
        <p>forget password? <a href="">click here</a></p>
        <p>
          don't have acount?
          <a href="javascript:void(0);" onclick="GoToSignUp()">sign up</a>
        </p>
      </form>
    </div>
    <!-------------------------------------------------------------------------------->
    <!-------------------------------------------------------------------------------->
    <div class="login-form signupform">
      <i class="fas fa-times" id="form-close" onclick="hideformSignUP()"></i>
      <form action="">
        <h3>Register</h3>
        <input type="text" class="box" placeholder="Enter your name" />
        <input type="email" class="box" placeholder="Enter your email" />
        <input type="number" min="1" class="box" placeholder="Enter your age" />
        <input
          type="tel"
          pattern="[0-9]{11}"
          class="box"
          placeholder="Enter your phone"
        />
        <input type="password" class="box" placeholder="Enter your password" />
        <input type="password" class="box" placeholder="Confirm password" />
        <input type="submit" value="Register now" class="btn" />
        <p>
          Have an accounnt?<a href="javascript:void(0);" onclick="GoToLogin()">
            sign in</a
          >
        </p>
      </form>
    </div>

    <section id="hotel-info" dir="rtl">
      <div class="container">
        <div id="banner">
          <div class="profile">
            <div class="stars">[ <span class="stars-count">  </span> stars ]</div>
            <div id="hotel-img"></div>
            <div id="hotel-name"></div>
          </div>
        </div>
        <div class="space" style="height: 120px"></div>
        <nav>
          <ul class="navs">
            <li class="nav-item active" data-open="about">عن الفندق</li>
            <li class="nav-item" data-open="pricing">الأسعار</li>
            <li class="nav-item" data-open="images">صور</li>
            <li class="nav-item" data-open="offers">عروض</li>
            <li class="nav-item" data-open="contact"> اتصل بنا </li>
          </ul>
          <div class="nav-contents">
            <div class="tab active" id="about">
              <h3 id="hotel-location"></h3>
              <h3><span class="hotel-name"></span></h3>
              <p id="description"></p>
              <h3> نبذة عن الفندق </span></h3>
              <p id="history"></p>

              <h3>مميزات الفندق</h3>
              <div id="advantages"></div>
              <div id="rating-section">
                <h3>تقييمات العملاء <span id="rating"></span></h3>
                <h3>التقييمات <span id="votes"></span></h3>
                <p> المعدل <span id="rate"></span></p>
                <h3>تفاصيل:</h3>
                <p id="rating-details"></p>
              </div>
            </div>
            <div class="tab" id="pricing">
              <h1 style="font-size: 1.3rem;"> قائمة أسعار </h1>
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>اسم</th>
                    <th>حد أدنى</th>
                    <th>حد أقصى</th>
                    <th>وجبات</th>
                    <th>متبقى للحجز</th>
                  </tr>
                </thead>
                <tbody>

                </tbody>
              </table>

              <br>
              
              <h1 style="font-size: 1.3rem;">شروط الخدمة</h1>
              <div id="terms" class="terms">

              </div>
              <br>
              <button class="btn">الاطلاع على العروض</button>
              
            </div>
            <div class="tab" id="images">صور</div>
            <div class="tab" id="offers">عروض</div>
            <div class="tab" id="contact" style="padding: 2rem; text-align: center;">
              <h1 style="font-size: 32px;">بيانات الاتصال</h1>
              <table class="contacts" style="width: 50%; border: 1px solid; margin: auto"></table>
            </div>
          </div>
        </nav>
      </div>
    </section>

    <!-------------------------------------------------------------------------------->

    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>

    <script src="../hotels.js"></script>
    <script src="../travel.js"></script>
    <script>
      window.addEventListener("load", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const hotels = Hotels;
        const hotel = hotels.find((h) => h.id == urlParams.get("id"));

        if (hotel) {
          
       
        
        document.querySelector("#hotel-name").innerHTML = hotel.name;
        document.querySelector(".hotel-name").innerHTML = hotel.name;
        document.querySelector("#hotel-location").innerHTML = "#" + hotel.city;
        document.querySelector("#description").innerHTML = hotel.desc;
        document.querySelector(".stars-count").innerHTML = hotel.stars;
        document.querySelector("#history").innerHTML = hotel.history;
        document.querySelector("#hotel-img").style.backgroundImage =
        "url('.." + hotel.image + "')";
        document.querySelector("#banner").style.backgroundImage =
        "url('.." + hotel.cover + "')";
        const [votes, rate] = calcRating(hotel.rating);
        const ratingStars = document.createElement('div')
        ratingStars.innerHTML = drowStars(rate)
        ratingStars.classList.add('rateingStars')
        ratingStars.style.color = setStarsColor(rate)
        document.querySelector("#rating").appendChild(ratingStars);
        document.querySelector("#votes").innerHTML=votes;
        document.querySelector("#rate").innerHTML=rate;
        
        for (let i = 0; i < 5; i++) {
          let bar = document.createElement('div');
          bar.classList.add('rating-bar')
          let barText = document.createElement('div')
          barText.classList.add('bar-text')
          barText.innerHTML = i+1
          
          let barColored = document.createElement('div')
          barColored.classList.add('bar-colored')
          let colorRange = document.createElement('div')
          colorRange.style.width=(hotel.rating[i]/votes*150).toFixed(0)+'px'
          colorRange.style.backgroundColor = 'green'
          colorRange.classList.add('color-range')
          barColored.appendChild(colorRange)
          let barVotes = document.createElement('div')
          barVotes.innerHTML = hotel.rating[i]
          barVotes.classList.add('bar-votes')
          barVotes.style.padding = '2px 1rem'
          bar.appendChild(barText)
          bar.appendChild(barColored)
          bar.appendChild(barVotes)
          document.querySelector("#rating-details").appendChild(bar);
          
        }

        //advantages part
        const advData = hotel.advantages
        
        const advantagesDiv = document.getElementById('advantages')
        const advContainer = document.createElement('UL')
        advData.forEach ((elem)=>{
          var advElem = document.createElement('LI')
          advElem.classList.add('adv-item')
            advElem.innerHTML = elem
            advContainer.appendChild(advElem)
          }  
        )
        console.log(advData)
      advantagesDiv.appendChild(advContainer);
        // Rendering Images Section

        const hotelImages = document.getElementById('images')
        const renderedImages = hotel.images.map((img)=>{
          return `<img src="..${img}" alt="${hotel.name}"/>`
        })
        hotelImages.innerHTML=renderedImages

        // Rendering Pricing Section
        const pricingBody=document.querySelector('#pricing table tbody')
        const renderedPricing = hotel.prices.map((item, index)=>{
          return (`
            <tr>
              <td>${++index}</td>
              <td>${item.name}</td>
              <td>${item.min}$</td>
              <td>${item.max}$</td>
              <td>${item.meals}</td>
              <td>${item.remain}</td>
            </tr>
          `)
        })
        renderedPricing.forEach((pricing)=>{
          pricingBody.innerHTML+=pricing
        })

        // Rendering Contact Info
        const contact = document.querySelector('#contact table.contacts')
        const contactInfo = hotel.contact

        contactInfo.forEach((item)=> {
          let contactsRow = document.createElement('tr'); 
          let contactType = document.createElement('td')
          contactType.innerText=item.type; 
          let contactVal = document.createElement('td')
          contactVal.innerText=item.val; 
          contactsRow.appendChild(contactType)
          contactsRow.appendChild(contactVal)
          contact.appendChild(contactsRow)
        }
          
          
        )
        
        // Terms and conditions

        console.log(hotel.terms)
        const terms = document.getElementById('terms')
        const hotelTerms = hotel.terms
        hotelTerms.forEach((term)=>{
          let termTitle = document.createElement('h4')
          termTitle.classList.add('term-title')
          termTitle.innerHTML=term.title
          let termsList = document.createElement('ul')
          termsList.classList.add('term-items')
          term.items.forEach((tli)=>{
            let li = document.createElement('li')
            li.textContent=tli
            termsList.appendChild(li)
          })

          let termItem = document.createElement('div')
          termItem.classList.add('term-container')
          termItem.appendChild(termTitle)
          termItem.appendChild(termsList)
          terms.appendChild(termItem)
        })


        const navItems = document.querySelectorAll('.nav-item')
        const tabs = document.querySelectorAll('.tab')
        
        navItems.forEach((item)=>{
          item.addEventListener('click', function (e) {
            let currentSelectedItem = document.querySelector('nav ul li.nav-item.active')
            currentSelectedItem.classList.remove('active')
            e.target.classList.add('active')
            const the_target = item.getAttribute('data-open')

            tabs.forEach(tab=>{
              tab.classList.remove('active')
            })
              
            
            document.getElementById(the_target).classList.add('active')
          })
        })
      
        } else {
          return confirm('hotel is not exists')
        }
      });





    </script>
  </body>
</html>
